
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Demo of CCC for PSL Meetup &#8212; Cost-of-Capital-Calculator</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Web Application" href="../webapp.html" />
    <link rel="prev" title="Cost-of-Capital-Calculator" href="../intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/ccc.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Cost-of-Capital-Calculator</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Cost-of-Capital-Calculator
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  CCC Example
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Demo of CCC for PSL Meetup
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Web Application
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../webapp.html">
   Web Application
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contributing to CCC
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../contributing/contributor_guide.html">
   Contributor Guide
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  CCC API
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api/public_api.html">
   Cost-of-Capital-Calculator API
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/calcfunctions.html">
     Cost of Capital Calculation Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/calculator.html">
     Cost of Capital Calculator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/data.html">
     Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/get_taxcalc_rates.html">
     Get marginal tax rates from Tax-Calculator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/parameters.html">
     Parameters
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/paramfunctions.html">
     Parameter Calculation Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/utils.html">
     CCC utility functions
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  CCC Guide
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../CCC_guide.html">
   Overview and Assumptions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../license.html">
   License
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  References
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../references.html">
   References
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Citations of CCC
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../citations.html">
   Citations and use cases of CCC
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/PSLmodels/Cost-of-Capital-Calculator/master?urlpath=tree/book/content/examples/PSL_demo.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/PSLmodels/Cost-of-Capital-Calculator"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/PSLmodels/Cost-of-Capital-Calculator/issues/new?title=Issue%20on%20page%20%2Fcontent/examples/PSL_demo.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/content/examples/PSL_demo.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#first-things-first-import-necessary-packages">
   First things first, import necessary packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-an-instance-of-the-assets-class">
   Create an instance of the Assets class
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-instances-of-the-two-parameters-classes">
   Create instances of the two parameters classes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-an-instance-of-the-calculator-class">
   Create an instance of the Calculator class
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#specifying-a-reform-policy">
   Specifying a reform policy
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tabular-output">
   Tabular output
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualizations">
   Visualizations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   Summary
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Demo of CCC for PSL Meetup</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#first-things-first-import-necessary-packages">
   First things first, import necessary packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-an-instance-of-the-assets-class">
   Create an instance of the Assets class
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-instances-of-the-two-parameters-classes">
   Create instances of the two parameters classes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-an-instance-of-the-calculator-class">
   Create an instance of the Calculator class
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#specifying-a-reform-policy">
   Specifying a reform policy
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tabular-output">
   Tabular output
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualizations">
   Visualizations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   Summary
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="demo-of-ccc-for-psl-meetup">
<h1>Demo of CCC for PSL Meetup<a class="headerlink" href="#demo-of-ccc-for-psl-meetup" title="Permalink to this headline">#</a></h1>
<p>This notebook provides a demonstration of the Cost-of-Capital-Calculator (CCC) for the PSL Meetup on April 29, 2019.</p>
<p>To run this notebook on your machine, you will need to follow the instructions to install CCC as described in the CCC README <a class="reference external" href="https://github.com/PSLmodels/Cost-of-Capital-Calculator">here</a>.  In particular, you need to:</p>
<ul class="simple">
<li><p>Install the <a class="reference external" href="https://www.anaconda.com/distribution/">Anaconda distribution</a> of Python</p></li>
<li><p>Install the CCC package by typing <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">conda-forge</span> <span class="pre">ccc</span></code> (or <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">cost-of-captial-calculator</span></code>) in the command prompt.</p></li>
</ul>
<p>Once you follow the above, you will be ready to work with this Jupyter Notebook.</p>
<section id="first-things-first-import-necessary-packages">
<h2>First things first, import necessary packages<a class="headerlink" href="#first-things-first-import-necessary-packages" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># To install ccc package (if not already):</span>
<span class="o">%%</span> <span class="n">capture</span>
<span class="o">!</span>pip install cost-of-capital-calculator
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import packages</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_notebook</span>
<span class="c1"># import CCC classes that we&#39;ll work with</span>
<span class="kn">from</span> <span class="nn">ccc.data</span> <span class="kn">import</span> <span class="n">Assets</span>
<span class="kn">from</span> <span class="nn">ccc.parameters</span> <span class="kn">import</span> <span class="n">Specification</span><span class="p">,</span> <span class="n">DepreciationParams</span>
<span class="kn">from</span> <span class="nn">ccc.calculator</span> <span class="kn">import</span> <span class="n">Calculator</span>
<span class="c1"># to print bokeh plots inline</span>
<span class="n">output_notebook</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<div class="bk-root">
    <a href="https://bokeh.org" target="_blank" class="bk-logo bk-logo-small bk-logo-notebook"></a>
    <span id="1002">Loading BokehJS ...</span>
</div></div><script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

  const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }

  
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    const el = document.getElementById("1002");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }


  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  
  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-2.4.2.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-2.4.2.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.2.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.2.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-2.4.2.min.js"];
  const css_urls = [];
  

  const inline_js = [
    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
    function(Bokeh) {
    
    
    }
  ];

  function run_inline_js() {
    
    if (root.Bokeh !== undefined || force === true) {
      
    for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
    if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("1002")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }

  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));</script></div>
</div>
</section>
<section id="create-an-instance-of-the-assets-class">
<h2>Create an instance of the Assets class<a class="headerlink" href="#create-an-instance-of-the-assets-class" title="Permalink to this headline">#</a></h2>
<p>This is the class that contains the data that underlie CCC.  The basic object is a Pandas DataFrame where each row represents a combination of a specific type of asset, industry (approximately 6-digit NAICS) and tax treatment.  The columns represent names and codes for the asset and industry classifications, the tax depreciation rules used for that asset, and the rate of economic depreciation (<code class="docutils literal notranslate"><span class="pre">delta</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">assets</span> <span class="o">=</span> <span class="n">Assets</span><span class="p">()</span>
<span class="n">assets</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>tax_treat</th>
      <th>assets</th>
      <th>bea_asset_code</th>
      <th>bea_ind_code</th>
      <th>Industry</th>
      <th>minor_code_alt</th>
      <th>major_asset_group</th>
      <th>minor_asset_group</th>
      <th>major_industry</th>
      <th>asset_name</th>
      <th>delta</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>corporate</td>
      <td>0.0</td>
      <td>RD32</td>
      <td>110C</td>
      <td>Farms</td>
      <td>111</td>
      <td>Intellectual Property</td>
      <td>Intellectual Property</td>
      <td>Agriculture, forestry, fishing, and hunting</td>
      <td>Aerospace products and parts manufacturing</td>
      <td>0.22</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>corporate</td>
      <td>0.0</td>
      <td>RD32</td>
      <td>113F</td>
      <td>Forestry, fishing, and related activities</td>
      <td>113</td>
      <td>Intellectual Property</td>
      <td>Intellectual Property</td>
      <td>Agriculture, forestry, fishing, and hunting</td>
      <td>Aerospace products and parts manufacturing</td>
      <td>0.22</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>corporate</td>
      <td>0.0</td>
      <td>RD32</td>
      <td>113F</td>
      <td>Forestry, fishing, and related activities</td>
      <td>114</td>
      <td>Intellectual Property</td>
      <td>Intellectual Property</td>
      <td>Agriculture, forestry, fishing, and hunting</td>
      <td>Aerospace products and parts manufacturing</td>
      <td>0.22</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>corporate</td>
      <td>0.0</td>
      <td>RD32</td>
      <td>2110</td>
      <td>Oil and gas extraction</td>
      <td>211110</td>
      <td>Intellectual Property</td>
      <td>Intellectual Property</td>
      <td>Mining</td>
      <td>Aerospace products and parts manufacturing</td>
      <td>0.22</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>corporate</td>
      <td>0.0</td>
      <td>RD32</td>
      <td>2120</td>
      <td>Mining, except oil and gas</td>
      <td>212110</td>
      <td>Intellectual Property</td>
      <td>Intellectual Property</td>
      <td>Mining</td>
      <td>Aerospace products and parts manufacturing</td>
      <td>0.22</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="create-instances-of-the-two-parameters-classes">
<h2>Create instances of the two parameters classes<a class="headerlink" href="#create-instances-of-the-two-parameters-classes" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Specification</span></code> class contains many of the model parameters, although depreciation system parameters are contained in the <code class="docutils literal notranslate"><span class="pre">DepreciationParams</span></code> class.  Both are required arguments for the <code class="docutils literal notranslate"><span class="pre">Calculator</span></code> object.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Specification</span></code> object has methods that load the data from a file that contains the default parameter values (<code class="docutils literal notranslate"><span class="pre">default_parameters.json</span></code>) and then stores them as attributes of the <code class="docutils literal notranslate"><span class="pre">Specification</span></code> class object.</p>
<p><code class="docutils literal notranslate"><span class="pre">p.u</span></code> looks into the instance of this class named <code class="docutils literal notranslate"><span class="pre">p</span></code> and executing the cell below will show you that <code class="docutils literal notranslate"><span class="pre">p.u</span></code> is dictionary containtin marginal tax rates on corporate and pass-through income.</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">Specification</span></code> class has some arguments, such as <code class="docutils literal notranslate"><span class="pre">call_tc</span></code>, which defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>, but if set to <code class="docutils literal notranslate"><span class="pre">True</span></code> will call the Tax-Calculator to estimate marginal tax rates on individual filers’ income.</p>
<p>Similar to <code class="docutils literal notranslate"><span class="pre">Specification</span></code>, <code class="docutils literal notranslate"><span class="pre">DepreciationParams</span></code> loads default parameters from a JSON file, in this case the file <code class="docutils literal notranslate"><span class="pre">tax_depreciation_rules.json</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create an instance of the Specification class</span>
<span class="c1"># p = Specification()</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Specification</span><span class="p">(</span><span class="n">call_tc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Look at attributes</span>
<span class="n">p</span><span class="o">.</span><span class="n">u</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Calculator initial year =  2014
Calculator year =  2022
year:  2022
{&#39;tau_pt&#39;: array([0.20291415]), &#39;tau_div&#39;: array([0.17179479]), &#39;tau_int&#39;: array([0.31126241]), &#39;tau_scg&#39;: array([0.2836037]), &#39;tau_lcg&#39;: array([0.18346882]), &#39;tau_td&#39;: array([0.20469421]), &#39;tau_h&#39;: array([0.03877468])}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;c&#39;: array([0.21]), &#39;pt&#39;: array([0.20291415])}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create an instance of the DepreciationParams class</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">DepreciationParams</span><span class="p">()</span>
<span class="c1"># Look at an attribute of the dp object</span>
<span class="n">dp</span><span class="o">.</span><span class="n">asset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>OrderedDict([(&#39;value&#39;, {&#39;life&#39;: 5.0, &#39;method&#39;: &#39;DB 200%&#39;}),
             (&#39;asset_name&#39;, &#39;Mainframes&#39;),
             (&#39;BEA_code&#39;, &#39;EP1A&#39;),
             (&#39;minor_asset_group&#39;, &#39;Computers and Software&#39;),
             (&#39;major_asset_group&#39;, &#39;Equipment&#39;),
             (&#39;ADS_life&#39;, 5.0),
             (&#39;GDS_life&#39;, 5.0),
             (&#39;system&#39;, &#39;GDS&#39;),
             (&#39;year&#39;, 2020)])
</pre></div>
</div>
</div>
</div>
</section>
<section id="create-an-instance-of-the-calculator-class">
<h2>Create an instance of the Calculator class<a class="headerlink" href="#create-an-instance-of-the-calculator-class" title="Permalink to this headline">#</a></h2>
<p>This class does the calculations on the data.  It takes as arguments the data object (named <code class="docutils literal notranslate"><span class="pre">assets</span></code> here) and the parameters object (named <code class="docutils literal notranslate"><span class="pre">p</span></code> here).</p>
<p>Excuting the cell below creates an instance of the calculator class with these data and parameters, but does not yet excecute any calculations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create an instance of the Calculator class</span>
<span class="n">calc1</span> <span class="o">=</span> <span class="n">Calculator</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">dp</span><span class="p">,</span> <span class="n">assets</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>With an instance of the <code class="docutils literal notranslate"><span class="pre">Calculator</span></code> class created, we can start doing some calculations with these data.</p>
<p>For instance, we can compute a table of the share of corporate vs non-corporate assets across each industry.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Look at shares of assets across industry</span>
<span class="n">calc1</span><span class="o">.</span><span class="n">asset_share_table</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Industry</th>
      <th>Corporate</th>
      <th>Pass-Through</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Agriculture, forestry, fishing, and hunting</td>
      <td>0.309688</td>
      <td>0.690312</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Mining</td>
      <td>0.826839</td>
      <td>0.173161</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Utilities</td>
      <td>0.948540</td>
      <td>0.051460</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Construction</td>
      <td>0.286840</td>
      <td>0.713160</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Manufacturing</td>
      <td>0.859014</td>
      <td>0.140986</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Wholesale trade</td>
      <td>0.715166</td>
      <td>0.284834</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Retail trade</td>
      <td>0.728628</td>
      <td>0.271372</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Transportation and warehousing</td>
      <td>0.789652</td>
      <td>0.210348</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Information</td>
      <td>0.918722</td>
      <td>0.081278</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Finance and insurance</td>
      <td>0.786056</td>
      <td>0.213944</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Real estate and rental and leasing</td>
      <td>0.212052</td>
      <td>0.787948</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Professional, scientific, and technical services</td>
      <td>0.501699</td>
      <td>0.498301</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Management of companies and enterprises</td>
      <td>0.824397</td>
      <td>0.175603</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Administrative and waste management services</td>
      <td>0.569110</td>
      <td>0.430890</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Educational services</td>
      <td>0.590168</td>
      <td>0.409832</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Health care and social assistance</td>
      <td>0.510425</td>
      <td>0.489575</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Arts, entertainment, and recreation</td>
      <td>0.490811</td>
      <td>0.509189</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Accommodation and food services</td>
      <td>0.482236</td>
      <td>0.517764</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Other services, except government</td>
      <td>0.343467</td>
      <td>0.656533</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="specifying-a-reform-policy">
<h2>Specifying a reform policy<a class="headerlink" href="#specifying-a-reform-policy" title="Permalink to this headline">#</a></h2>
<p>To see some more interesting results, we will want to create another <code class="docutils literal notranslate"><span class="pre">Calculator</span></code> object with a change in policy or economic assumptions.  We can do this in a way analogous to our original instantiation of the <code class="docutils literal notranslate"><span class="pre">Calculator</span></code> object above.  In particular, we’ll need to create a new <code class="docutils literal notranslate"><span class="pre">Specification</span></code> object (we can use the same underlying data, which was in the object we named <code class="docutils literal notranslate"><span class="pre">assets</span></code>).</p>
<p>In the code below, we’ll specify our “reform” as current law tax policy for 2026 (the baseline parameters above came from the default model year, 2019).  In addition, we’ll increase the corporate income tax rate from 21 to 25%.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create another policy</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">Specification</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2026</span><span class="p">)</span>
<span class="n">p2</span><span class="o">.</span><span class="n">update_specification</span><span class="p">({</span><span class="s1">&#39;CIT_rate&#39;</span><span class="p">:</span> <span class="mf">0.35</span><span class="p">})</span>
<span class="n">calc2</span> <span class="o">=</span> <span class="n">Calculator</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">dp</span><span class="p">,</span> <span class="n">assets</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="tabular-output">
<h2>Tabular output<a class="headerlink" href="#tabular-output" title="Permalink to this headline">#</a></h2>
<p>Now with two <code class="docutils literal notranslate"><span class="pre">Calculator</span></code> objects named <code class="docutils literal notranslate"><span class="pre">calc1</span></code> and <code class="docutils literal notranslate"><span class="pre">calc2</span></code> (representing the baseline and reform policies), we are ready to compute some of the changes in effective tax rates, cost of capital, or other variables measured in this model.</p>
<p>We start with an overall summary table showing the marginal effective total tax rates (METTRs) for all investments, corporate investments, and pass-through investments under varying financing assumptions.  This is done through the <code class="docutils literal notranslate"><span class="pre">summary_table</span></code> function.  It takes a calculator object as an argument.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Look at differences in METTRs between the two policies</span>
<span class="n">calc1</span><span class="o">.</span><span class="n">summary_table</span><span class="p">(</span><span class="n">calc2</span><span class="p">)</span> <span class="c1"># calc1 is the baseline, calc2 the reform</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Marginal Effective Total Tax Rate Under Baseline Policy</th>
      <th>Marginal Effective Total Tax Rate Under Reform Policy</th>
      <th>Change from Baseline (pp)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Overall</td>
      <td>17.385422</td>
      <td>25.403326</td>
      <td>8.017904</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Corporations</td>
      <td>17.428895</td>
      <td>28.035541</td>
      <td>10.606646</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Equity Financed</td>
      <td>20.321015</td>
      <td>34.294894</td>
      <td>13.973878</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Debt Financed</td>
      <td>6.660793</td>
      <td>-2.327833</td>
      <td>-8.988626</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Pass-Through Entities</td>
      <td>18.812173</td>
      <td>23.397810</td>
      <td>4.585637</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Equity Financed</td>
      <td>17.178244</td>
      <td>23.098247</td>
      <td>5.920003</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Debt Financed</td>
      <td>25.163912</td>
      <td>24.787343</td>
      <td>-0.376569</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>the <code class="docutils literal notranslate"><span class="pre">Calculator.summary_table()</span></code> method defaults to showing the results for the METTR, but there is a keyword argument that would allow you to view the output for other variables computed in CCC.  We can use this to see changes in the cost of capital (denoted by <span class="math notranslate nohighlight">\(\rho\)</span> in the model):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Look at how the cost of capital changed</span>
<span class="n">calc1</span><span class="o">.</span><span class="n">summary_table</span><span class="p">(</span><span class="n">calc2</span><span class="p">,</span> <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;rho&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Cost of Capital Under Baseline Policy</th>
      <th>Cost of Capital Under Reform Policy</th>
      <th>Change from Baseline (pp)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Overall</td>
      <td>5.656019</td>
      <td>6.263947</td>
      <td>0.607928</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Corporations</td>
      <td>5.658997</td>
      <td>6.493061</td>
      <td>0.834064</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Equity Financed</td>
      <td>6.571207</td>
      <td>7.968742</td>
      <td>1.397536</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Debt Financed</td>
      <td>3.723999</td>
      <td>3.396877</td>
      <td>-0.327121</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Pass-Through Entities</td>
      <td>5.652469</td>
      <td>5.990843</td>
      <td>0.338374</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Equity Financed</td>
      <td>6.321854</td>
      <td>6.808519</td>
      <td>0.486665</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Debt Financed</td>
      <td>4.016359</td>
      <td>3.996250</td>
      <td>-0.020109</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>One can also save results to disk by specifying an output type (‘excel’, ‘json’, ‘csv’, ‘tex’) and a file path:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Save these results to disk</span>
<span class="n">calc1</span><span class="o">.</span><span class="n">summary_table</span><span class="p">(</span><span class="n">calc2</span><span class="p">,</span> <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;rho&#39;</span><span class="p">,</span> <span class="n">output_type</span><span class="o">=</span><span class="s1">&#39;excel&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;cc_table.xlsx&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>There are also <code class="docutils literal notranslate"><span class="pre">Calculator</span></code> methods to compute summary tables by asset type or industry.  These are computed in the next two cells.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Summary by asset type</span>
<span class="n">calc1</span><span class="o">.</span><span class="n">asset_summary_table</span><span class="p">(</span><span class="n">calc2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Category</th>
      <th>Marginal Effective Total Tax Rate Under Baseline Policy</th>
      <th>Marginal Effective Total Tax Rate Under Reform Policy</th>
      <th>Change from Baseline (pp)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Overall</td>
      <td>17.385422</td>
      <td>25.403326</td>
      <td>8.017904</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Corporate</td>
      <td>17.428895</td>
      <td>28.035541</td>
      <td>10.606646</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Equipment</td>
      <td>6.378304</td>
      <td>22.198307</td>
      <td>15.820003</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Structures</td>
      <td>18.079919</td>
      <td>27.585133</td>
      <td>9.505214</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Intellectual Property</td>
      <td>6.378304</td>
      <td>10.914820</td>
      <td>4.536516</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Inventories</td>
      <td>28.943514</td>
      <td>39.720019</td>
      <td>10.776504</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Land</td>
      <td>26.038860</td>
      <td>35.629608</td>
      <td>9.590748</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Pass-through</td>
      <td>18.812173</td>
      <td>23.397810</td>
      <td>4.585637</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Equipment</td>
      <td>1.948677</td>
      <td>14.897821</td>
      <td>12.949144</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Structures</td>
      <td>17.439967</td>
      <td>21.502642</td>
      <td>4.062675</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Intellectual Property</td>
      <td>1.948677</td>
      <td>6.085711</td>
      <td>4.137034</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Inventories</td>
      <td>25.029232</td>
      <td>29.369039</td>
      <td>4.339807</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Land</td>
      <td>21.844677</td>
      <td>25.670063</td>
      <td>3.825386</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Summary by industry</span>
<span class="n">calc1</span><span class="o">.</span><span class="n">industry_summary_table</span><span class="p">(</span><span class="n">calc2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Category</th>
      <th>Marginal Effective Total Tax Rate Under Baseline Policy</th>
      <th>Marginal Effective Total Tax Rate Under Reform Policy</th>
      <th>Change from Baseline (pp)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Overall</td>
      <td>17.385422</td>
      <td>25.403326</td>
      <td>8.017904</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Corporate</td>
      <td>17.428895</td>
      <td>28.035541</td>
      <td>10.606646</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Agriculture, forestry, fishing, and hunting</td>
      <td>18.298771</td>
      <td>30.621670</td>
      <td>12.322899</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Mining</td>
      <td>9.355980</td>
      <td>17.646210</td>
      <td>8.290230</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Utilities</td>
      <td>7.403845</td>
      <td>19.798819</td>
      <td>12.394974</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Construction</td>
      <td>18.838676</td>
      <td>30.349240</td>
      <td>11.510564</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Manufacturing</td>
      <td>17.725594</td>
      <td>26.830751</td>
      <td>9.105157</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Wholesale trade</td>
      <td>23.188460</td>
      <td>34.273842</td>
      <td>11.085383</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Retail trade</td>
      <td>24.179499</td>
      <td>34.690033</td>
      <td>10.510534</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Transportation and warehousing</td>
      <td>10.639291</td>
      <td>20.393471</td>
      <td>9.754180</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Information</td>
      <td>10.034240</td>
      <td>24.539591</td>
      <td>14.505351</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Finance and insurance</td>
      <td>18.373608</td>
      <td>30.264878</td>
      <td>11.891270</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Real estate and rental and leasing</td>
      <td>24.087083</td>
      <td>33.721519</td>
      <td>9.634436</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Professional, scientific, and technical ser...</td>
      <td>14.266593</td>
      <td>25.403173</td>
      <td>11.136579</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Management of companies and enterprises</td>
      <td>22.177149</td>
      <td>32.248505</td>
      <td>10.071355</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Administrative and waste management services</td>
      <td>13.969707</td>
      <td>26.515287</td>
      <td>12.545580</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Educational services</td>
      <td>22.179268</td>
      <td>31.613808</td>
      <td>9.434540</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Health care and social assistance</td>
      <td>20.317482</td>
      <td>30.832650</td>
      <td>10.515168</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Arts, entertainment, and recreation</td>
      <td>15.213585</td>
      <td>26.326474</td>
      <td>11.112889</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Accommodation and food services</td>
      <td>23.766349</td>
      <td>34.095181</td>
      <td>10.328832</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Other services, except government</td>
      <td>20.522378</td>
      <td>29.799384</td>
      <td>9.277005</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Pass-through</td>
      <td>18.812173</td>
      <td>23.397810</td>
      <td>4.585637</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Agriculture, forestry, fishing, and hunting</td>
      <td>15.876157</td>
      <td>22.523466</td>
      <td>6.647308</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Mining</td>
      <td>5.274190</td>
      <td>11.663757</td>
      <td>6.389567</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Utilities</td>
      <td>3.285505</td>
      <td>13.167828</td>
      <td>9.882323</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Construction</td>
      <td>16.084501</td>
      <td>22.106145</td>
      <td>6.021644</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Manufacturing</td>
      <td>14.207660</td>
      <td>19.167293</td>
      <td>4.959633</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Wholesale trade</td>
      <td>21.047185</td>
      <td>26.159069</td>
      <td>5.111883</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Retail trade</td>
      <td>21.275141</td>
      <td>26.050928</td>
      <td>4.775787</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Transportation and warehousing</td>
      <td>6.820432</td>
      <td>14.128465</td>
      <td>7.308033</td>
    </tr>
    <tr>
      <th>30</th>
      <td>Information</td>
      <td>5.985239</td>
      <td>17.050742</td>
      <td>11.065503</td>
    </tr>
    <tr>
      <th>31</th>
      <td>Finance and insurance</td>
      <td>18.248503</td>
      <td>23.618762</td>
      <td>5.370259</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Real estate and rental and leasing</td>
      <td>20.871296</td>
      <td>24.725673</td>
      <td>3.854377</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Professional, scientific, and technical ser...</td>
      <td>9.972917</td>
      <td>17.301080</td>
      <td>7.328162</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Management of companies and enterprises</td>
      <td>17.913126</td>
      <td>22.858351</td>
      <td>4.945225</td>
    </tr>
    <tr>
      <th>35</th>
      <td>Administrative and waste management services</td>
      <td>9.605741</td>
      <td>18.203833</td>
      <td>8.598093</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Educational services</td>
      <td>17.893937</td>
      <td>22.297889</td>
      <td>4.403953</td>
    </tr>
    <tr>
      <th>37</th>
      <td>Health care and social assistance</td>
      <td>16.036972</td>
      <td>21.670206</td>
      <td>5.633234</td>
    </tr>
    <tr>
      <th>38</th>
      <td>Arts, entertainment, and recreation</td>
      <td>10.649402</td>
      <td>17.958885</td>
      <td>7.309483</td>
    </tr>
    <tr>
      <th>39</th>
      <td>Accommodation and food services</td>
      <td>19.724755</td>
      <td>24.515138</td>
      <td>4.790384</td>
    </tr>
    <tr>
      <th>40</th>
      <td>Other services, except government</td>
      <td>15.985057</td>
      <td>20.612279</td>
      <td>4.627222</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="visualizations">
<h2>Visualizations<a class="headerlink" href="#visualizations" title="Permalink to this headline">#</a></h2>
<p>If one wants to visualize the effects of changes in tax policy, the <code class="docutils literal notranslate"><span class="pre">Calculator</span></code> class has a few methods for this.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">grouped_bar</span></code> method to show differential effects across assets (the default):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Visualizing changes by asset type</span>
<span class="n">aplot</span> <span class="o">=</span> <span class="n">calc1</span><span class="o">.</span><span class="n">grouped_bar</span><span class="p">(</span><span class="n">calc2</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">aplot</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">





<div class="bk-root" id="4d022835-4e3c-4fa5-bcc4-84fbf13971fe" data-root-id="1004"></div>
</div><script type="application/javascript">(function(root) {
  function embed_document(root) {
    
  const docs_json = {"43c72506-edaa-452c-be56-e0d4290da470":{"defs":[],"roots":{"references":[{"attributes":{"below":[{"id":"1014"}],"center":[{"id":"1016"},{"id":"1020"},{"id":"1038"}],"height":350,"left":[{"id":"1017"}],"renderers":[{"id":"1027"},{"id":"1045"},{"id":"1057"},{"id":"1058"}],"title":null,"toolbar":{"id":"1021"},"toolbar_location":null,"x_range":{"id":"1006"},"x_scale":{"id":"1010"},"y_range":{"id":"1008"},"y_scale":{"id":"1012"}},"id":"1004","subtype":"Figure","type":"Plot"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#e84d60"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"#e84d60"},"line_alpha":{"value":0.2},"line_color":{"value":"#e84d60"},"top":{"field":"Reform"},"width":{"value":0.2},"x":{"field":"major_asset_group","transform":{"id":"1040"}}},"id":"1044","type":"VBar"},{"attributes":{},"id":"1031","type":"BasicTickFormatter"},{"attributes":{"label":{"value":"Reform"},"renderers":[{"id":"1045"}]},"id":"1056","type":"LegendItem"},{"attributes":{"axis":{"id":"1017"},"coordinates":null,"dimension":1,"group":null,"ticker":null},"id":"1020","type":"Grid"},{"attributes":{},"id":"1010","type":"CategoricalScale"},{"attributes":{},"id":"1032","type":"AllLabels"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#e84d60"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"#e84d60"},"line_alpha":{"value":0.1},"line_color":{"value":"#e84d60"},"top":{"field":"Reform"},"width":{"value":0.2},"x":{"field":"major_asset_group","transform":{"id":"1040"}}},"id":"1043","type":"VBar"},{"attributes":{"coordinates":null,"formatter":{"id":"1034"},"group":null,"major_label_policy":{"id":"1035"},"ticker":{"id":"1015"}},"id":"1014","type":"CategoricalAxis"},{"attributes":{},"id":"1021","type":"Toolbar"},{"attributes":{},"id":"1008","type":"DataRange1d"},{"attributes":{"data":{"Baseline":{"__ndarray__":"Qx1g0hVUsD9DHWDSFVSwP2cFmfoahtI/vS4m8zSq0D/bfyaKbSTHPw==","dtype":"float64","order":"little","shape":[5]},"Reform":{"__ndarray__":"JqUpbRARzT9vHGd+22+9P2I/HW94rNk/urSr07AS1z/mA1HyUvXRPw==","dtype":"float64","order":"little","shape":[5]},"index":[0,1,2,3,4],"major_asset_group":["Equipment","Intellectual Property","Inventories","Land","Structures"]},"selected":{"id":"1037"},"selection_policy":{"id":"1036"}},"id":"1003","type":"ColumnDataSource"},{"attributes":{},"id":"1035","type":"AllLabels"},{"attributes":{"label":{"value":"Baseline"},"renderers":[{"id":"1027"}]},"id":"1039","type":"LegendItem"},{"attributes":{},"id":"1012","type":"LinearScale"},{"attributes":{"coordinates":null,"group":null,"line_alpha":0.2,"line_color":"#718dbf","line_dash":[6],"line_width":2,"location":0.17428894800227407},"id":"1057","type":"Span"},{"attributes":{"coordinates":null,"data_source":{"id":"1003"},"glyph":{"id":"1042"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1044"},"nonselection_glyph":{"id":"1043"},"view":{"id":"1046"}},"id":"1045","type":"GlyphRenderer"},{"attributes":{},"id":"1037","type":"Selection"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#718dbf"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"#718dbf"},"line_alpha":{"value":0.1},"line_color":{"value":"#718dbf"},"top":{"field":"Baseline"},"width":{"value":0.2},"x":{"field":"major_asset_group","transform":{"id":"1022"}}},"id":"1025","type":"VBar"},{"attributes":{"axis":{"id":"1014"},"coordinates":null,"grid_line_color":null,"group":null,"ticker":null},"id":"1016","type":"Grid"},{"attributes":{"coordinates":null,"formatter":{"id":"1031"},"group":null,"major_label_policy":{"id":"1032"},"ticker":{"id":"1018"}},"id":"1017","type":"LinearAxis"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#718dbf"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"#718dbf"},"line_alpha":{"value":0.2},"line_color":{"value":"#718dbf"},"top":{"field":"Baseline"},"width":{"value":0.2},"x":{"field":"major_asset_group","transform":{"id":"1022"}}},"id":"1026","type":"VBar"},{"attributes":{"source":{"id":"1003"}},"id":"1046","type":"CDSView"},{"attributes":{"coordinates":null,"group":null,"items":[{"id":"1039"},{"id":"1056"}],"location":"top_left","orientation":"horizontal"},"id":"1038","type":"Legend"},{"attributes":{"range":{"id":"1006"}},"id":"1022","type":"Dodge"},{"attributes":{},"id":"1015","type":"CategoricalTicker"},{"attributes":{"range":{"id":"1006"},"value":0.25},"id":"1040","type":"Dodge"},{"attributes":{"coordinates":null,"data_source":{"id":"1003"},"glyph":{"id":"1024"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1026"},"nonselection_glyph":{"id":"1025"},"view":{"id":"1028"}},"id":"1027","type":"GlyphRenderer"},{"attributes":{"coordinates":null,"group":null,"line_alpha":0.2,"line_color":"#e84d60","line_dash":[6],"line_width":2,"location":0.28507294391464827},"id":"1058","type":"Span"},{"attributes":{},"id":"1018","type":"BasicTicker"},{"attributes":{"fill_color":{"value":"#e84d60"},"hatch_color":{"value":"#e84d60"},"line_color":{"value":"#e84d60"},"top":{"field":"Reform"},"width":{"value":0.2},"x":{"field":"major_asset_group","transform":{"id":"1040"}}},"id":"1042","type":"VBar"},{"attributes":{"source":{"id":"1003"}},"id":"1028","type":"CDSView"},{"attributes":{},"id":"1034","type":"CategoricalTickFormatter"},{"attributes":{},"id":"1036","type":"UnionRenderers"},{"attributes":{"fill_color":{"value":"#718dbf"},"hatch_color":{"value":"#718dbf"},"line_color":{"value":"#718dbf"},"top":{"field":"Baseline"},"width":{"value":0.2},"x":{"field":"major_asset_group","transform":{"id":"1022"}}},"id":"1024","type":"VBar"},{"attributes":{"factors":["Equipment","Intellectual Property","Inventories","Land","Structures"],"range_padding":0.1},"id":"1006","type":"FactorRange"}],"root_ids":["1004"]},"title":"Bokeh Application","version":"2.4.2"}};
  const render_items = [{"docid":"43c72506-edaa-452c-be56-e0d4290da470","root_ids":["1004"],"roots":{"1004":"4d022835-4e3c-4fa5-bcc4-84fbf13971fe"}}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);</script></div>
</div>
<p>or we can change from the default asset category split to a split by industry by changing the value of the <code class="docutils literal notranslate"><span class="pre">group_by_asset</span></code> keyword argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Visualizing changes by industry</span>
<span class="n">iplot</span> <span class="o">=</span> <span class="n">calc1</span><span class="o">.</span><span class="n">grouped_bar</span><span class="p">(</span><span class="n">calc2</span><span class="p">,</span> <span class="n">group_by_asset</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">iplot</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">





<div class="bk-root" id="5eec7313-025a-495d-a923-5e8b78fd5ed4" data-root-id="1114"></div>
</div><script type="application/javascript">(function(root) {
  function embed_document(root) {
    
  const docs_json = {"43f4ded7-5e97-4608-9ee3-4d1be9a60b7b":{"defs":[],"roots":{"references":[{"attributes":{"below":[{"id":"1124"}],"center":[{"id":"1126"},{"id":"1130"},{"id":"1148"}],"height":800,"left":[{"id":"1127"}],"renderers":[{"id":"1137"},{"id":"1155"},{"id":"1167"},{"id":"1168"}],"title":null,"toolbar":{"id":"1131"},"toolbar_location":null,"width":800,"x_range":{"id":"1116"},"x_scale":{"id":"1120"},"y_range":{"id":"1118"},"y_scale":{"id":"1122"}},"id":"1114","subtype":"Figure","type":"Plot"},{"attributes":{},"id":"1122","type":"LinearScale"},{"attributes":{"coordinates":null,"group":null,"line_alpha":0.2,"line_color":"#e84d60","line_dash":[6],"line_width":2,"location":0.28507294391464827},"id":"1168","type":"Span"},{"attributes":{"range":{"id":"1116"},"value":0.25},"id":"1150","type":"Dodge"},{"attributes":{"range":{"id":"1116"}},"id":"1132","type":"Dodge"},{"attributes":{"coordinates":null,"group":null,"line_alpha":0.2,"line_color":"#718dbf","line_dash":[6],"line_width":2,"location":0.17428894800227407},"id":"1167","type":"Span"},{"attributes":{},"id":"1131","type":"Toolbar"},{"attributes":{},"id":"1125","type":"CategoricalTicker"},{"attributes":{"label":{"value":"Reform"},"renderers":[{"id":"1155"}]},"id":"1166","type":"LegendItem"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#718dbf"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"#718dbf"},"line_alpha":{"value":0.2},"line_color":{"value":"#718dbf"},"top":{"field":"Baseline"},"width":{"value":0.2},"x":{"field":"major_industry","transform":{"id":"1132"}}},"id":"1136","type":"VBar"},{"attributes":{"source":{"id":"1113"}},"id":"1156","type":"CDSView"},{"attributes":{},"id":"1120","type":"CategoricalScale"},{"attributes":{"coordinates":null,"formatter":{"id":"1144"},"group":null,"major_label_orientation":45,"major_label_policy":{"id":"1145"},"ticker":{"id":"1125"}},"id":"1124","type":"CategoricalAxis"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#e84d60"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"#e84d60"},"line_alpha":{"value":0.2},"line_color":{"value":"#e84d60"},"top":{"field":"Reform"},"width":{"value":0.2},"x":{"field":"major_industry","transform":{"id":"1150"}}},"id":"1154","type":"VBar"},{"attributes":{},"id":"1144","type":"CategoricalTickFormatter"},{"attributes":{},"id":"1142","type":"AllLabels"},{"attributes":{},"id":"1146","type":"UnionRenderers"},{"attributes":{"label":{"value":"Baseline"},"renderers":[{"id":"1137"}]},"id":"1149","type":"LegendItem"},{"attributes":{"coordinates":null,"formatter":{"id":"1141"},"group":null,"major_label_policy":{"id":"1142"},"ticker":{"id":"1128"}},"id":"1127","type":"LinearAxis"},{"attributes":{"factors":["Accommodation and food services","Administrative and waste management services","Agriculture, forestry, fishing, and hunting","Arts, entertainment, and recreation","Construction","Educational services","Finance and insurance","Health care and social assistance","Information","Management of companies and enterprises","Manufacturing","Mining","Other services, except government","Professional, scientific, and technical services","Real estate and rental and leasing","Retail trade","Transportation and warehousing","Utilities","Wholesale trade"],"range_padding":0.1},"id":"1116","type":"FactorRange"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#e84d60"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"#e84d60"},"line_alpha":{"value":0.1},"line_color":{"value":"#e84d60"},"top":{"field":"Reform"},"width":{"value":0.2},"x":{"field":"major_industry","transform":{"id":"1150"}}},"id":"1153","type":"VBar"},{"attributes":{"source":{"id":"1113"}},"id":"1138","type":"CDSView"},{"attributes":{"coordinates":null,"group":null,"items":[{"id":"1149"},{"id":"1166"}],"location":"top_left","orientation":"horizontal"},"id":"1148","type":"Legend"},{"attributes":{},"id":"1128","type":"BasicTicker"},{"attributes":{"axis":{"id":"1124"},"coordinates":null,"grid_line_color":null,"group":null,"ticker":null},"id":"1126","type":"Grid"},{"attributes":{},"id":"1141","type":"BasicTickFormatter"},{"attributes":{"axis":{"id":"1127"},"coordinates":null,"dimension":1,"group":null,"ticker":null},"id":"1130","type":"Grid"},{"attributes":{"fill_color":{"value":"#718dbf"},"hatch_color":{"value":"#718dbf"},"line_color":{"value":"#718dbf"},"top":{"field":"Baseline"},"width":{"value":0.2},"x":{"field":"major_industry","transform":{"id":"1132"}}},"id":"1134","type":"VBar"},{"attributes":{"coordinates":null,"data_source":{"id":"1113"},"glyph":{"id":"1152"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1154"},"nonselection_glyph":{"id":"1153"},"view":{"id":"1156"}},"id":"1155","type":"GlyphRenderer"},{"attributes":{},"id":"1118","type":"DataRange1d"},{"attributes":{"fill_color":{"value":"#e84d60"},"hatch_color":{"value":"#e84d60"},"line_color":{"value":"#e84d60"},"top":{"field":"Reform"},"width":{"value":0.2},"x":{"field":"major_industry","transform":{"id":"1150"}}},"id":"1152","type":"VBar"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#718dbf"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"#718dbf"},"line_alpha":{"value":0.1},"line_color":{"value":"#718dbf"},"top":{"field":"Baseline"},"width":{"value":0.2},"x":{"field":"major_industry","transform":{"id":"1132"}}},"id":"1135","type":"VBar"},{"attributes":{},"id":"1145","type":"AllLabels"},{"attributes":{},"id":"1147","type":"Selection"},{"attributes":{"coordinates":null,"data_source":{"id":"1113"},"glyph":{"id":"1134"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1136"},"nonselection_glyph":{"id":"1135"},"view":{"id":"1138"}},"id":"1137","type":"GlyphRenderer"},{"attributes":{"data":{"Baseline":{"__ndarray__":"K23128Frzj932Jj4l+HBPxhzJyokbMc/jdAVBTB5wz/w93GyDh3IP4BEVtWzY8w/5phI86mExz+xobDioQHKP0a/exwKsLk/5VtcHgJjzD+ntW6VUrDGPyhZ6eiI87c/dbNn4sVEyj+YjmCT4ELCP5Tz/vTa1M4/SIAPYSPzzj9tlP7mkDy7P1+11hgv9LI/lM6J+WSuzT8=","dtype":"float64","order":"little","shape":[19]},"Reform":{"__ndarray__":"FYPNNPAY1j+QslWIMEfRPx/a3KOR49M/xJnYCXUo0T/ZPBr+ObfTP5d6iSEOhdQ/1719yH6p0z+LaY3G6AXUP98YiwadBdA/Os95ulzs1D+8smRJiXrRP03uBAw2R8c/1+s8jrpd0z/SkebULJLQPwlkE24e3NU/78bHisJ51j/e/9BQiMXKP+ig0k70A8o/f7+wqwQ21j8=","dtype":"float64","order":"little","shape":[19]},"index":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],"major_industry":["Accommodation and food services","Administrative and waste management services","Agriculture, forestry, fishing, and hunting","Arts, entertainment, and recreation","Construction","Educational services","Finance and insurance","Health care and social assistance","Information","Management of companies and enterprises","Manufacturing","Mining","Other services, except government","Professional, scientific, and technical services","Real estate and rental and leasing","Retail trade","Transportation and warehousing","Utilities","Wholesale trade"]},"selected":{"id":"1147"},"selection_policy":{"id":"1146"}},"id":"1113","type":"ColumnDataSource"}],"root_ids":["1114"]},"title":"Bokeh Application","version":"2.4.2"}};
  const render_items = [{"docid":"43f4ded7-5e97-4608-9ee3-4d1be9a60b7b","root_ids":["1114"],"roots":{"1114":"5eec7313-025a-495d-a923-5e8b78fd5ed4"}}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);</script></div>
</div>
<p>There’s also a plot that illustrates the range of the effects of taxes on investments across asset types, by showing the min, max, and mean values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot to show variation in METTRs across assets</span>
<span class="n">rplot</span> <span class="o">=</span> <span class="n">calc1</span><span class="o">.</span><span class="n">range_plot</span><span class="p">(</span><span class="n">calc2</span><span class="p">,</span> <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;metr&#39;</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">rplot</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">





<div class="bk-root" id="5a925981-37f3-41a3-a8ff-fbee3fb8c6aa" data-root-id="1234"></div>
</div><script type="application/javascript">(function(root) {
  function embed_document(root) {
    
  const docs_json = {"f9ffa6b6-e04f-448f-891e-a0b7ba90b2fb":{"defs":[],"roots":{"references":[{"attributes":{"below":[{"id":"1243"}],"center":[{"id":"1246"},{"id":"1250"},{"id":"1260"},{"id":"1261"},{"id":"1262"},{"id":"1282"}],"height":500,"left":[{"id":"1247"}],"renderers":[{"id":"1259"},{"id":"1267"},{"id":"1273"},{"id":"1288"},{"id":"1301"},{"id":"1314"},{"id":"1320"},{"id":"1336"},{"id":"1351"}],"title":{"id":"1252"},"toolbar":{"id":"1251"},"toolbar_location":null,"width":500,"x_range":{"id":"1235"},"x_scale":{"id":"1239"},"y_range":{"id":"1237"},"y_scale":{"id":"1241"}},"id":"1234","subtype":"Figure","type":"Plot"},{"attributes":{"coordinates":null,"data_source":{"id":"1233"},"glyph":{"id":"1317"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1319"},"nonselection_glyph":{"id":"1318"},"view":{"id":"1321"}},"id":"1320","type":"GlyphRenderer"},{"attributes":{"coordinates":null,"fill_alpha":0.2,"fill_color":"white","group":null,"right":0.5},"id":"1260","type":"BoxAnnotation"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#718dbf"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"#718dbf"},"line_alpha":{"value":0.2},"line_color":{"value":"#718dbf"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"means"}},"id":"1272","type":"Circle"},{"attributes":{"source":{"id":"1233"}},"id":"1321","type":"CDSView"},{"attributes":{"coordinates":null,"fill_alpha":0.1,"fill_color":"white","group":null,"left":0.5,"right":1.5},"id":"1261","type":"BoxAnnotation"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#718dbf"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"#718dbf"},"line_alpha":{"value":0.1},"line_color":{"value":"#718dbf"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"means"}},"id":"1271","type":"Circle"},{"attributes":{"format":"0%"},"id":"1257","type":"NumeralTickFormatter"},{"attributes":{},"id":"1241","type":"LinearScale"},{"attributes":{"source":{"id":"1232"}},"id":"1268","type":"CDSView"},{"attributes":{"coordinates":null,"fill_alpha":0.2,"fill_color":"white","group":null,"left":1.5},"id":"1262","type":"BoxAnnotation"},{"attributes":{"coordinates":null,"group":null,"text_font":"Helvetica"},"id":"1252","type":"Title"},{"attributes":{"coordinates":null,"group":null,"line_alpha":0.2,"line_dash":[6],"line_width":2,"location":0},"id":"1259","type":"Span"},{"attributes":{},"id":"1281","type":"Selection"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#e84d60"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"#e84d60"},"line_alpha":{"value":0.2},"line_color":{"value":"#e84d60"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"mins"}},"id":"1335","type":"Circle"},{"attributes":{},"id":"1237","type":"DataRange1d"},{"attributes":{"data":{"max_asset":["Inventories","Inventories","Inventories"],"maxes":[0.1715367123714358,-0.06578788226151004,0.23626733773084305],"mean_asset":["Overall","Overall","Overall"],"means":[0.0372852157964054,-0.262084258806486,0.11736148787988565],"min_asset":["Intellectual Property","Intellectual Property","Intellectual Property"],"mins":[-0.09155606847470654,-0.4364303178484108,-1.1963610179150395e-16],"positions":[-0.1,0.9,1.9],"types":["Typically Financed","Debt Financed","Equity Financed"]},"selected":{"id":"1281"},"selection_policy":{"id":"1280"}},"id":"1232","type":"ColumnDataSource"},{"attributes":{"label":{"value":"Reform"},"renderers":[{"id":"1320"},{"id":"1336"},{"id":"1351"}]},"id":"1331","type":"LegendItem"},{"attributes":{"coordinates":null,"data_source":{"id":"1232"},"glyph":{"id":"1264"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1266"},"nonselection_glyph":{"id":"1265"},"view":{"id":"1268"}},"id":"1267","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#718dbf"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"#718dbf"},"line_alpha":{"value":0.2},"line_color":{"value":"#718dbf"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"mins"}},"id":"1287","type":"Circle"},{"attributes":{"fill_color":{"value":"#e84d60"},"hatch_color":{"value":"#e84d60"},"line_color":{"value":"#e84d60"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"maxes"}},"id":"1348","type":"Circle"},{"attributes":{"coordinates":null,"data_source":{"id":"1233"},"glyph":{"id":"1348"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1350"},"nonselection_glyph":{"id":"1349"},"view":{"id":"1352"}},"id":"1351","type":"GlyphRenderer"},{"attributes":{"line_alpha":{"value":0.2},"line_color":{"value":"#718dbf"},"line_width":{"value":2},"x0":{"field":"positions"},"x1":{"field":"positions"},"y0":{"field":"mins"},"y1":{"field":"maxes"}},"id":"1266","type":"Segment"},{"attributes":{},"id":"1248","type":"BasicTicker"},{"attributes":{"fill_color":{"value":"#e84d60"},"hatch_color":{"value":"#e84d60"},"line_color":{"value":"#e84d60"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"mins"}},"id":"1333","type":"Circle"},{"attributes":{"fill_color":{"value":"#e84d60"},"hatch_color":{"value":"#e84d60"},"line_color":{"value":"#e84d60"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"means"}},"id":"1317","type":"Circle"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#e84d60"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"#e84d60"},"line_alpha":{"value":0.1},"line_color":{"value":"#e84d60"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"means"}},"id":"1318","type":"Circle"},{"attributes":{"code":"\n        var types = [\"Typically Financed\", \"Debt Financed\", \"Equity Financed\"]\n        return types[tick]\n        "},"id":"1255","type":"FuncTickFormatter"},{"attributes":{},"id":"1279","type":"AllLabels"},{"attributes":{"coordinates":null,"data_source":{"id":"1232"},"glyph":{"id":"1270"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1272"},"nonselection_glyph":{"id":"1271"},"view":{"id":"1274"}},"id":"1273","type":"GlyphRenderer"},{"attributes":{"coordinates":null,"data_source":{"id":"1232"},"glyph":{"id":"1285"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1287"},"nonselection_glyph":{"id":"1286"},"view":{"id":"1289"}},"id":"1288","type":"GlyphRenderer"},{"attributes":{},"id":"1329","type":"UnionRenderers"},{"attributes":{"coordinates":null,"data_source":{"id":"1233"},"glyph":{"id":"1311"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1313"},"nonselection_glyph":{"id":"1312"},"view":{"id":"1315"}},"id":"1314","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1233"}},"id":"1315","type":"CDSView"},{"attributes":{"label":{"value":"Baseline"},"renderers":[{"id":"1273"},{"id":"1288"},{"id":"1301"}]},"id":"1283","type":"LegendItem"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#718dbf"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"#718dbf"},"line_alpha":{"value":0.1},"line_color":{"value":"#718dbf"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"maxes"}},"id":"1299","type":"Circle"},{"attributes":{"source":{"id":"1232"}},"id":"1289","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#e84d60"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"#e84d60"},"line_alpha":{"value":0.2},"line_color":{"value":"#e84d60"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"maxes"}},"id":"1350","type":"Circle"},{"attributes":{"line_alpha":{"value":0.1},"line_color":{"value":"#718dbf"},"line_width":{"value":2},"x0":{"field":"positions"},"x1":{"field":"positions"},"y0":{"field":"mins"},"y1":{"field":"maxes"}},"id":"1265","type":"Segment"},{"attributes":{"coordinates":null,"data_source":{"id":"1232"},"glyph":{"id":"1298"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1300"},"nonselection_glyph":{"id":"1299"},"view":{"id":"1302"}},"id":"1301","type":"GlyphRenderer"},{"attributes":{},"id":"1278","type":"AllLabels"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#e84d60"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"#e84d60"},"line_alpha":{"value":0.2},"line_color":{"value":"#e84d60"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"means"}},"id":"1319","type":"Circle"},{"attributes":{},"id":"1330","type":"Selection"},{"attributes":{"axis_label":"Marginal Effective Tax Rate","coordinates":null,"formatter":{"id":"1257"},"group":null,"major_label_policy":{"id":"1278"},"ticker":{"id":"1248"}},"id":"1247","type":"LinearAxis"},{"attributes":{"axis":{"id":"1243"},"coordinates":null,"grid_line_color":null,"group":null,"ticker":null},"id":"1246","type":"Grid"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#e84d60"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"#e84d60"},"line_alpha":{"value":0.1},"line_color":{"value":"#e84d60"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"maxes"}},"id":"1349","type":"Circle"},{"attributes":{"end":2.5,"start":-0.5},"id":"1235","type":"Range1d"},{"attributes":{},"id":"1280","type":"UnionRenderers"},{"attributes":{"axis":{"id":"1247"},"coordinates":null,"dimension":1,"grid_line_color":null,"group":null,"ticker":null},"id":"1250","type":"Grid"},{"attributes":{"line_alpha":{"value":0.1},"line_color":{"value":"#e84d60"},"line_width":{"value":2},"x0":{"field":"positions"},"x1":{"field":"positions"},"y0":{"field":"mins"},"y1":{"field":"maxes"}},"id":"1312","type":"Segment"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#e84d60"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"#e84d60"},"line_alpha":{"value":0.1},"line_color":{"value":"#e84d60"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"mins"}},"id":"1334","type":"Circle"},{"attributes":{"source":{"id":"1233"}},"id":"1352","type":"CDSView"},{"attributes":{"data":{"max_asset":["Inventories","Inventories","Inventories"],"maxes":[0.2930542097668927,-0.13096339112672467,0.3828060809571457],"mean_asset":["Overall","Overall","Overall"],"means":[0.1560221115131041,-0.41306259807735984,0.27215617091603245],"min_asset":["Intellectual Property","Intellectual Property","Intellectual Property"],"mins":[-0.044764641890598596,-0.7815749655421983,0.10026430338666585],"positions":[0.1,1.1,2.1],"types":["Typically Financed","Debt Financed","Equity Financed"]},"selected":{"id":"1330"},"selection_policy":{"id":"1329"}},"id":"1233","type":"ColumnDataSource"},{"attributes":{"ticks":[0,1,2]},"id":"1253","type":"FixedTicker"},{"attributes":{"source":{"id":"1233"}},"id":"1337","type":"CDSView"},{"attributes":{"line_color":{"value":"#718dbf"},"line_width":{"value":2},"x0":{"field":"positions"},"x1":{"field":"positions"},"y0":{"field":"mins"},"y1":{"field":"maxes"}},"id":"1264","type":"Segment"},{"attributes":{"line_color":{"value":"#e84d60"},"line_width":{"value":2},"x0":{"field":"positions"},"x1":{"field":"positions"},"y0":{"field":"mins"},"y1":{"field":"maxes"}},"id":"1311","type":"Segment"},{"attributes":{},"id":"1239","type":"LinearScale"},{"attributes":{"coordinates":null,"data_source":{"id":"1233"},"glyph":{"id":"1333"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1335"},"nonselection_glyph":{"id":"1334"},"view":{"id":"1337"}},"id":"1336","type":"GlyphRenderer"},{"attributes":{"fill_color":{"value":"#718dbf"},"hatch_color":{"value":"#718dbf"},"line_color":{"value":"#718dbf"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"means"}},"id":"1270","type":"Circle"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#718dbf"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"#718dbf"},"line_alpha":{"value":0.2},"line_color":{"value":"#718dbf"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"maxes"}},"id":"1300","type":"Circle"},{"attributes":{"source":{"id":"1232"}},"id":"1302","type":"CDSView"},{"attributes":{"line_alpha":{"value":0.2},"line_color":{"value":"#e84d60"},"line_width":{"value":2},"x0":{"field":"positions"},"x1":{"field":"positions"},"y0":{"field":"mins"},"y1":{"field":"maxes"}},"id":"1313","type":"Segment"},{"attributes":{"coordinates":null,"group":null,"items":[{"id":"1283"},{"id":"1331"}],"location":"bottom_right"},"id":"1282","type":"Legend"},{"attributes":{},"id":"1251","type":"Toolbar"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#718dbf"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"#718dbf"},"line_alpha":{"value":0.1},"line_color":{"value":"#718dbf"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"mins"}},"id":"1286","type":"Circle"},{"attributes":{"source":{"id":"1232"}},"id":"1274","type":"CDSView"},{"attributes":{"fill_color":{"value":"#718dbf"},"hatch_color":{"value":"#718dbf"},"line_color":{"value":"#718dbf"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"maxes"}},"id":"1298","type":"Circle"},{"attributes":{"fill_color":{"value":"#718dbf"},"hatch_color":{"value":"#718dbf"},"line_color":{"value":"#718dbf"},"size":{"value":12},"x":{"field":"positions"},"y":{"field":"mins"}},"id":"1285","type":"Circle"},{"attributes":{"axis_label":"Method of Financing","coordinates":null,"formatter":{"id":"1255"},"group":null,"major_label_policy":{"id":"1279"},"ticker":{"id":"1253"}},"id":"1243","type":"LinearAxis"}],"root_ids":["1234"]},"title":"Bokeh Application","version":"2.4.2"}};
  const render_items = [{"docid":"f9ffa6b6-e04f-448f-891e-a0b7ba90b2fb","root_ids":["1234"],"roots":{"1234":"5a925981-37f3-41a3-a8ff-fbee3fb8c6aa"}}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);</script></div>
</div>
<p>changing to show the effects on pass-through businesses and for a different output variable:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show</span><span class="p">(</span><span class="n">rplot</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot to show variation in METTRs across assets</span>
<span class="n">output_notebook</span><span class="p">()</span>
<span class="n">rplot2</span> <span class="o">=</span> <span class="n">calc1</span><span class="o">.</span><span class="n">range_plot</span><span class="p">(</span><span class="n">calc2</span><span class="p">,</span> <span class="n">corporate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;mettr&#39;</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">rplot2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>There’s a bubble plot too, though it doesn’t yet allow for many options (currently only plots METTRs for corporate entities):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bplot</span> <span class="o">=</span> <span class="n">calc1</span><span class="o">.</span><span class="n">asset_bubble</span><span class="p">(</span><span class="n">calc2</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">bplot</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">#</a></h2>
<p>This notebook provides a brief example of how one would work with CCC.  Please explore the source code to see additional flexiblity in the functions.  And please leave any questions or suggestions in the CCC repo at <a class="reference external" href="https://github.com/PSLmodels/Cost-of-Capital-Calculator/issues">https://github.com/PSLmodels/Cost-of-Capital-Calculator/issues</a>.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/examples"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../intro.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Cost-of-Capital-Calculator</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../webapp.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Web Application</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Jason DeBacker<br/>
  
      &copy; Copyright 2020.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>